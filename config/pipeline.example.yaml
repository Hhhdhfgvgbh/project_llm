version: 1
base_pipeline:
  execution_mode: sequential
  stages:
    - id: stage1
      type: single
      model: llama3_q5
      system_prompt: "You are an expert analyst."
      instructions: "Сконцентрируйся на фактах и кратком выводе."
      generation:
        temperature: 0.6
      output_mode: question_and_answer

    - id: stage2
      type: single
      model: mistral_q4
      system_prompt: "Critique the previous answer."
      input_from: stage1
      output_mode: answer_only

    - id: stage3
      type: multi
      models:
        - llama3_q5
        - mistral_q4
      system_prompt: "Provide alternative interpretations."
      aggregation:
        type: synthesis
        synthesis_model: llama3_q5
      input_from: stage2


pipelines:
  quick_summary:
    execution_mode: sequential
    stages:
      - id: stage1
        type: single
        model: llama3_q5
        system_prompt: "Summarize in 3 bullet points."
  deep_review:
    execution_mode: sequential
    stages:
      - id: stage1
        type: single
        model: mistral_q4
        system_prompt: "Analyze risks and assumptions."
      - id: stage2
        type: single
        model: llama3_q5
        system_prompt: "Create final recommendation."
        input_from: stage1
