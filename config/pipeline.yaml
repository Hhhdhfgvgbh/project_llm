version: 1
base_pipeline:
  execution_mode: sequential
  stages:
    - id: stage1
      type: single
      model: phi
      system_prompt: "You are an expert analyst."
      generation:
        temperature: 0.6
      output_mode: question_and_answer

    - id: stage2
      type: single
      model: phi
      system_prompt: "Review the previous answer and correct any inaccuracies or add more if necessary."
      input_from: stage1
      output_mode: answer_only

    - id: stage3
      type: multi
      models:
        - phi
        - deepseek
      system_prompt: "Shorten if necessary"
      aggregation:
        type: synthesis
        synthesis_model: deepseek
      input_from: stage2
